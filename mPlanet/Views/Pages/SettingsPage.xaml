<Page x:Class="mPlanet.Views.Pages.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Настройки">

    <Grid Background="White" Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Page Header -->
        <TextBlock Grid.Row="0" 
                   Text="Настройки приложения"
                   FontSize="24"
                   FontWeight="Bold"
                   Foreground="#34495E"
                   Margin="0,0,0,20"/>

        <!-- Settings Content -->
        <ScrollViewer Grid.Row="1">
            <StackPanel>
                <!-- Scanner Settings -->
                <GroupBox Header="Настройки сканера" Margin="0,0,0,20">
                    <Grid Margin="15">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="100"/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Мощность:"/>
                        <Slider Grid.Row="0" Grid.Column="1" 
                                Value="{Binding ScannerPower}" 
                                Minimum="1" Maximum="100"
                                TickPlacement="BottomRight"
                                TickFrequency="10"
                                Margin="5"/>
                        <TextBlock Grid.Row="0" Grid.Column="2" 
                                   Text="{Binding ScannerPower}"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="Частота (MHz):"/>
                        <TextBox Grid.Row="1" Grid.Column="1" 
                                 Text="{Binding ScannerFrequency}" 
                                 Margin="5"/>

                        <Label Grid.Row="2" Grid.Column="0" Content="Чувствительность:"/>
                        <Slider Grid.Row="2" Grid.Column="1" 
                                Value="{Binding ScannerSensitivity}" 
                                Minimum="1" Maximum="100"
                                TickPlacement="BottomRight"
                                TickFrequency="10"
                                Margin="5"/>
                        <TextBlock Grid.Row="2" Grid.Column="2" 
                                   Text="{Binding ScannerSensitivity}"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>
                    </Grid>
                </GroupBox>

                <!-- Export Settings -->
                <GroupBox Header="Настройки экспорта" Margin="0,0,0,20">
                    <StackPanel Margin="15">
                        <Grid Margin="0,0,0,10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <Label Grid.Column="0" Content="Папка экспорта:"/>
                            <TextBox Grid.Column="1" 
                                     Text="{Binding ExportPath}" 
                                     Margin="5,0"/>
                            <Button Grid.Column="2" 
                                    Content="Обзор..." 
                                    Command="{Binding BrowseExportPathCommand}"
                                    Margin="5,0,0,0"/>
                        </Grid>

                        <CheckBox Content="Автоматически открывать папку после экспорта"
                                  IsChecked="{Binding AutoOpenExportFolder}"
                                  Margin="0,10,0,0"/>
                    </StackPanel>
                </GroupBox>

                <!-- Application Settings -->
                <GroupBox Header="Настройки приложения">
                    <StackPanel Margin="15">
                        <CheckBox Content="Запускать при старте Windows"
                                  IsChecked="{Binding StartWithWindows}"
                                  Margin="0,0,0,10"/>
                        
                        <CheckBox Content="Минимизировать в системный трей"
                                  IsChecked="{Binding MinimizeToTray}"
                                  Margin="0,0,0,10"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Label Grid.Column="0" Content="Язык интерфейса:"/>
                            <ComboBox Grid.Column="1" 
                                      SelectedItem="{Binding SelectedLanguage}"
                                      ItemsSource="{Binding AvailableLanguages}"
                                      Margin="5,0,0,0"/>
                        </Grid>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,20,0,0">
            <Button Content="Сбросить по умолчанию" 
                    Command="{Binding ResetToDefaultsCommand}"
                    Margin="0,0,10,0"
                    Padding="15,5"/>
            <Button Content="Сохранить" 
                    Command="{Binding SaveSettingsCommand}"
                    Margin="0,0,10,0"
                    Padding="15,5"/>
            <Button Content="Отмена" 
                    Command="{Binding CancelSettingsCommand}"
                    Padding="15,5"/>
        </StackPanel>
    </Grid>
</Page>